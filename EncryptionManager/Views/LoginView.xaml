<Window x:Class="EncryptionManager.Views.LoginView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EncryptionManager.Views"
		xmlns:converters="clr-namespace:EncryptionManager.Views.Converters"
		xmlns:helpers="clr-namespace:EncryptionManager.Views.Helpers"
		xmlns:vm="clr-namespace:EncryptionManager.Interfaces"
		d:DataContext="{d:DesignInstance Type=vm:ILoginViewModel}"
        mc:Ignorable="d"
        Name="LoginWindow"
		WindowStyle="None"
		ResizeMode="NoResize"
		Width="280"
		Height="200"
		WindowStartupLocation="CenterScreen">

	<Window.Resources>
		<Style TargetType="{x:Type Button}"
			   BasedOn="{StaticResource BtnLoginViewStyle}">
		</Style>
	</Window.Resources>

	<Grid x:Name="GridMain"
		  FocusManager.FocusedElement="{Binding ElementName=TbLogin}">

		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition />
			<RowDefinition />
			<RowDefinition />
		</Grid.RowDefinitions>

		<Grid.ColumnDefinitions>
			<ColumnDefinition />
			<ColumnDefinition />
			<ColumnDefinition />
			<ColumnDefinition />
		</Grid.ColumnDefinitions>

		<Label x:Name="LbLogin"
			   Grid.Row="0"
			   Grid.Column="0"
			   Content="Login:" />

		<TextBox x:Name="TbLogin"
				 Grid.Row="0"
				 Grid.Column="1"
				 Grid.ColumnSpan="3"
				 TabIndex="0"
				 Text="{Binding User.Name, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True, NotifyOnValidationError=True}" />

		<Label x:Name="LbPassword"
			   Grid.Row="1"
			   Grid.Column="0"
			   Content="Hasło:" />

		<PasswordBox x:Name="PasswordBoxLogin"
					 Grid.Row="1"
					 Grid.Column="1"
					 Grid.ColumnSpan="3"
					 TabIndex="1"
					 helpers:PasswordBoxHelper.BindPassword="True"
					 helpers:PasswordBoxHelper.BoundPassword="{Binding User.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True, NotifyOnValidationError=True}"/>

		<TextBlock x:Name="TbStatus"
				   Grid.Row="2"
				   Grid.Column="0"
				   Grid.ColumnSpan="2"
				   HorizontalAlignment="Center"
				   VerticalAlignment="Center"
				   Text="{Binding Status.StatusText}">

			<TextBlock.Style>
				<Style TargetType="{x:Type TextBlock}">
					<Setter Property="Foreground"
							Value="{Binding Status.IsValidConnection, Converter={converters:BoolToColorConverter}}" />
				</Style>
			</TextBlock.Style>
		</TextBlock>

		<Button x:Name="BtnShowSettings"
				Grid.Row="2"
				Grid.Column="2"
				TabIndex="4"
				Command="{Binding ShowSettingsCommand}"
				CommandParameter="{Binding ElementName=LoginWindow}">

			<Button.Content>
				<Image Source="/Images/Setting.png" />
			</Button.Content>
		</Button>

		<Button x:Name="BtnCheckConnection"
				Grid.Row="2"
				Grid.Column="3"
				TabIndex="5"
				Command="{Binding CheckConnectionCommand}"
				IsEnabled="{Binding IsCheckConnectionEnabled}">

			<Button.Resources>
				<Storyboard x:Key="RefreshAnimation"
							BeginTime="00:00:00.000"
							Duration="00:00:5.000">

					<DoubleAnimation Storyboard.TargetName="ImgRefresh"
									 Storyboard.TargetProperty="Opacity"
									 From="1"
									 To="0.1"
									 Duration="0:0:2.500"
									 AutoReverse="True" />
					<DoubleAnimation Storyboard.TargetName="ImgRefresh"
									 Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
									 From="0"
									 To="360"
									 Duration="0:0:1.666"
									 RepeatBehavior="3" />
				</Storyboard>
			</Button.Resources>

			<Button.Content>
				<Image x:Name="ImgRefresh"
					   Source="/Images/Refresh.png"
					   Stretch="Uniform"
					   RenderTransformOrigin="0.5,0.5">

					<Image.RenderTransform>
						<RotateTransform Angle="0" />
					</Image.RenderTransform>
				</Image>
			</Button.Content>

			<Button.Triggers>
				<EventTrigger RoutedEvent="Button.Click">
					<BeginStoryboard Storyboard="{StaticResource RefreshAnimation}" />
				</EventTrigger>
			</Button.Triggers>
		</Button>

		<Button x:Name="BtnLogin"
				Grid.Row="3"
				Grid.Column="0"
				Grid.ColumnSpan="2"
				TabIndex="2"
				IsDefault="True"
				Command="{Binding LoginCommand}"
				CommandParameter="{Binding ElementName=LoginWindow}">

			<Button.Content>
				<StackPanel Orientation="Horizontal">
					<Image Source="/Images/Confirm.png" />
					<Label Content="Zaloguj" />
				</StackPanel>
			</Button.Content>
		</Button>

		<Button x:Name="BtnCancel"
				Grid.Row="3"
				Grid.Column="2"
				Grid.ColumnSpan="2"
				TabIndex="3"
				IsCancel="True"
				Command="{Binding CloseAppCommand}">

			<Button.Content>
				<StackPanel Orientation="Horizontal">
					<Image Source="/Images/Cancel_2.png" />
					<Label Content="Anuluj" />
				</StackPanel>
			</Button.Content>
		</Button>
	</Grid>
</Window>